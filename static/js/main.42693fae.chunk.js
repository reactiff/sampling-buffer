(this["webpackJsonpsampling-buffer-example"]=this["webpackJsonpsampling-buffer-example"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(15)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(4),s=n.n(a),l=(n(11),n(12),n(13),n(2)),c=n(1),u=function(e){var t=e.cols||[];return i.a.createElement("thead",null,i.a.createElement("tr",null,t.map((function(e,t){return i.a.createElement("th",{key:t},e)}))))},o=function(e){var t=e.item,n=e.cols,r=Array.isArray(t);return i.a.createElement("tr",{className:"no-text-overflow"},r&&t.map((function(e,t){return i.a.createElement("td",{key:n[t]},"number"===typeof e&&e.toFixed(0))})),!r&&n.map((function(e,r){return i.a.createElement("td",{key:n[r]},"number"===typeof t[e]&&t[e].toFixed(0))})))},f=(n(14),function(e){var t=e.cols,n=e.items;return n?i.a.createElement("table",{cellPadding:0,cellSpacing:0,className:"data-table"},t&&t.length>0&&i.a.createElement(u,{cols:t}),i.a.createElement("tbody",null,n.map((function(e,n){return i.a.createElement(o,{key:n,item:e,cols:t})})))):null});function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e,t,n,r){var i=t.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=new Array(i);return t.track.lifo((function(e,n){a[e.ordinal]=n[e.index][t.field]}),r,i),Math.min.apply(Math,a)}},v=function(e,t,n,r){var i=t.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=new Array(i);return t.track.lifo((function(e,n){a[e.ordinal]=n[e.index][t.field]}),r,i),Math.max.apply(Math,a)}},y=function(e,t,n,r){var i=t.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=0,s=0;return t.track.lifo((function(e,n){a+=n[e.index][t.field],s++}),r,i),a/s}},g=function(e,t,n,r,i){var a=t.track.getOffsetAdjAvailableLength(r);a<n||t.track.lifo((function(e,n){i(e,n[e.index][t.field])}),r,a)},b=function(e,t,n,r){if(0!==t.track.getOffsetAdjAvailableLength(r)){var i=e.mean(n,r),a=0,s=0;return e.fn(n,r,(function(e,t){a+=Math.pow(t-i,2),s++})),Math.sqrt(a/s)}};function k(e,t,n){return function(r,i){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i)}}var x=function(){function e(e){var t=this;Object.assign(this,e),this.min=k(this,e,m),this.max=k(this,e,v),this.mean=k(this,e,y),this.fn=function(e,t,n){return function(r,i,a){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i,a)}}(this,e,g),this.stDev=k(this,e,b),this.value=function(e){if(void 0===e&&(e=0),0!==t.track.getOffsetAdjAvailableLength(e))return t.track.get(e)[t.field]}}return e.createSerie=function(t,n){return new e({field:t,track:n})},p(e,[{key:"availableLength",get:function(){return this.track.getOffsetAdjAvailableLength(0)}}]),e}(),E=function(){function e(e,t){this.tags={},this.array=[],this.cursor=0,this.counter=0,this.serieInstances={},this.series={};var n={length:e};this.sampler=t,this.array=Array.from(n).map(this.sampler.createSample),this.cursor=e?0:-1,this.shouldAdvance=this.sampler.newSamplePredicate,this.createSeries()}var t=e.prototype;return t.getOffsetAdjAvailableLength=function(e){return Math.max(0,Math.min(this.array.length,this.counter+1)-Math.abs(e))},t.get=function(e){return void 0===e&&(e=0),this.array[this.getIndex(e)]},t.getIndex=function(e){void 0===e&&(e=0);var t=this.cursor+e;if(e>0)return t%this.array.length;for(;t<0;)t=this.array.length+t;return t},t.createSeries=function(){var e=[].concat(this.sampler.fields.publicKeys,this.sampler.fields.expressionKeys);this.serieInstances={};var t={},n=this;e.forEach((function(e){t[e]=function(){return n.serieInstances[e]||(n.serieInstances[e]=x.createSerie(e,n)),n.serieInstances[e]}}));this.series=new Proxy(t,{get:function(e,t,n){return e[t]()}})},t.nextSample=function(e){var t=this.current[this.sampler.timeKey];if(this.lastAdvanceTime=t,0===this.current.__count){var n=this.get(-1);n.__count&&this.sampler.ffill(this.current,n)}this.counter++,this.cursor++,this.cursor===this.array.length&&(this.cursor=0),Object.assign(this.array[this.cursor],this.sampler.blank),this.array[this.cursor][this.sampler.timeKey]=t+this.sampler.interval},t.fillMissingSamples=function(e){var t=1;if(this.sampler.suppressAutoSampling&&(t=0),this.sampler.interval>0&&this.lastPeriodTime){var n=(e-this.lastPeriodTime)/this.sampler.interval-t;if(n>0)for(var r=0;r<n;r++){var i=this.sampler.interval,a=this.lastPeriodTime+i;this.nextSample("fillMissingSamples"),this.lastPeriodTime=a}}},t.preload=function(e){var t=this.sampler.getSampleTime(e.time);this.fillMissingSamples(t),this.sampler.collect(this,this.current,e,t),this.shouldAdvance(this.current,e,t,this.lastPeriodTime)&&(this.nextSample("preload"),this.lastPeriodTime=t)},t.capture=function(e,t){var n=t||e[this.sampler.timeKey],r=this.sampler.getSampleTime(n);this.lastPeriodTime||(this.lastPeriodTime=r),this.sampler.interval>0&&this.sampler.suppressAutoSampling&&this.fillMissingSamples(r),this.sampler.collect(this,this.current,e,r),0===this.sampler.interval&&(this.nextSample("capture"),this.lastPeriodTime=r),this.onUpdate&&this.onUpdate()},t.lifo=function(e,t,n){void 0===n&&(n=-1);for(var r=Math.abs(t||0),i=n>=0?Math.abs(n):0,a=this.array.length-r,s={index:this.cursor-r,relative:0,ordinal:0},l=this.array.length;l--&&!(r&&s.ordinal>=a)&&!(n>=0&&s.ordinal>=i);)s.index<0&&(s.index=this.array.length-1),e(s,this.array),s.ordinal++,s.index--,s.relative--},t.fifo=function(e,t){void 0===t&&(t=-1);for(var n=this.array.length,r=t>=0?t:n,i={index:0,relative:-(n-1),ordinal:0},a=n;a--&&r--;)i.index=(n+this.cursor-a)%n,e(i,this.array),i.ordinal++,i.relative++},p(e,[{key:"length",get:function(){return this.array.length}},{key:"current",get:function(){return this.array[this.cursor]}}]),e}();function S(e,t,n){e.keys.push(t),"_"===t[0]&&"_"!==t[1]?(e.hidden[t]=!0,e.hiddenKeys.push(t)):e.publicKeys.push(t),"function"===typeof n?e.fn[t]=n:"object"===typeof n?(n.cumulative&&(e.cumulative[t]=!0),e.fn[t]=n.fn,e.fill[t]=n.fill):e.fn[t]=function(){return n}}function j(e,t){var n={keys:[],publicKeys:[],hiddenKeys:[],expressionKeys:[],hidden:{},cumulative:{},fn:{},fill:{}};return Array.isArray(e.fields)?function(e,t){t.fields.forEach((function(t){switch(typeof t){case"string":S(e,t,(function(e){return e[t]}));break;default:S(e,t.name,t)}}))}(n,e):function(e,t){Object.entries(t.fields).forEach((function(t){var n=t[0],r=t[1];S(e,n,r)}))}(n,e),t.forEach((function(e){n.expressionKeys.push(e.name)})),n}function A(e){var t={__count:0};return e.publicKeys.forEach((function(e){t[e]=void 0})),e.expressionKeys.forEach((function(e){t[e]=void 0})),function(){return d({},t)}}var O=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e};function T(e){var t=j(e,[]),n={addExpression:function(t,r){if(n.expressionDict[t])throw new Error("A field with the name '"+t+"' already exists.");n.expressionDict[t]=r,n.expressions.push({name:t,expression:r}),n.fields=j(e,n.expressions),n.createSample=A(n.fields),n.cumulatives=n.fields.keys.filter((function(e){return n.fields.cumulative[e]})),n.blank=function(e,t){var n=d({},e);return t.forEach((function(e){return delete n[e]})),n}(n.createSample(),n.cumulatives),n.tracks.forEach((function(e){return e.createSeries()}))},blank:{},bufferLength:e.bufferLength,collect:function(e,t,i,a){(function(e,t,i){e.__count++,n.fields.hiddenKeys.forEach((function(r){n.fields.fn[r](t,e[r],e)})),n.fields.publicKeys.forEach((function(a){if(a===n.timeKey){var s=r(i||t[a]);t[a]=s}var l=n.fields.fn[a](t,e[a],e);"undefined"!==typeof l&&(e[a]=l)}))})(t,i,a),function(e,t){n.expressions.forEach((function(n){var r=n.expression(t.series);"undefined"!==typeof r&&(e[n.name]=r)}))}(t,e)},createSample:A(t),cumulatives:[],expressionDict:{},expressions:[],ffill:function(e,t){n.fields.publicKeys.filter((function(e){return!!n.fields.fill[e]})).forEach((function(r){e[n.timeKey]=t[n.timeKey]+n.interval,e[r]=n.fields.fill[r](t)})),e.__count=1},fields:t,getSampleTime:r,interval:e.interval||0,newSamplePredicate:function(e,t,i,a){var s=r(i);return"undefined"===typeof a||(0===n.interval||s-a>=n.interval)},series:{},suppressAutoSampling:e.suppressAutoSampling,timeKey:O(e.timeKey)||"time",trackKeys:e.trackKeys||[],tracks:[]};function r(e){return n.interval?e-e%n.interval:e}return n}var w=Math.min,K=Math.max,M=Math.abs,P={cryptoTrade:{time:{dataFields:["time"],fields:{time:function(e,t){return q(t,e.time)}}},ohlc:{dataFields:["price"],fields:{open:{fn:function(e,t){return q(t,e.price)},fill:function(e){return e.close}},high:{fn:function(e,t){return K(e.price,q(t,e.price))},fill:function(e){return e.close}},low:{fn:function(e,t){return w(e.price,q(t,e.price))},fill:function(e){return e.close}},close:{fn:function(e){return e.price},fill:function(e){return e.close}}}},side:{dataFields:["buy","sell"],fields:{_buy:function(e){return L(e.qty>0,(function(){return e.buy=1}))},_sell:function(e){return L(e.qty<0,(function(){return e.sell=1}))}}},volume:{dataFields:["qty"],fields:{buyVol:{fn:function(e,t){return L(e.buy,q(t,0)+e.qty)},fill:function(){return 0}},sellVol:{fn:function(e,t){return L(e.sell,q(t,0)+e.qty)},fill:function(){return 0}},ttlVol:{fn:function(e,t){return q(t,0)+M(e.qty)},fill:function(){return 0}},netVol:{fn:function(e,t){return q(t,0)+e.qty},fill:function(){return 0}},cumNetVol:{fn:function(e,t){return q(t,0)+e.qty},cumulative:!0}}},mv:{dataFields:["buy","sell","price","qty","ttlMv","ttlVol"],fields:{buyMv:{fn:function(e,t){return L(e.buy,q(t,0)+e.price*e.qty)},fill:function(){return 0}},sellMv:{fn:function(e,t){return L(e.sell,q(t,0)+e.price*e.qty)},fill:function(){return 0}},ttlMv:{fn:function(e,t){return q(t,0)+e.price*M(e.qty)},fill:function(){return 0}},netMv:{fn:function(e,t){return q(t,0)+e.price*e.qty},fill:function(){return 0}},volWtdPrice:{fn:function(e,t,n){return n.ttlMv/n.ttlVol},fill:function(){return 0}}}},stats:{dataFields:["buy","sell"],fields:{ttlTradeCount:{fn:function(e,t){return q(t,0)+1},fill:function(){return 0}},buyTradeCount:{fn:function(e,t){return L(e.buy,q(t,0)+1)},fill:function(){return 0}},sellTradeCount:{fn:function(e,t){return L(e.sell,q(t,0)+1)},fill:function(){return 0}}}}}};function q(e,t){return"undefined"!==typeof e?e:t}function L(e,t){if(e)return"function"===typeof t?t():t}var I=function(){return!0},_=function(){function e(e){this.tracks={},this.sampling=!1,this.sampler=T(e)}var t=e.prototype;return t.addExpression=function(e,t){this.sampler.addExpression(e,t)},t.getTracks=function(e){return Object.entries(this.tracks).filter((function(t){return(e||function(){return!0})(t[0],t[1])})).map((function(e){return e[1]}))},t.startSampling=function(){if(!this.sampler.suppressAutoSampling&&!this.sampling){var e=this;this.timer=setInterval((function(){e.sampler.tracks.forEach((function(e){e.nextSample("timer")})),e.onInterval&&e.onInterval()}),this.sampler.interval),this.sampling=!0}},t.stopSampling=function(){clearInterval(this.timer),this.sampling=!1},t.preload=function(e,t){this.createDataTracks(e),Object.entries(this.tracks).filter((function(e){return(t||I)(e[0],e[1])})).forEach((function(t){return t[1].preload(e)}))},t.capture=function(e,t){this.createDataTracks(e),Object.entries(this.tracks).filter((function(e){return(t||I)(e[0],e[1])})).forEach((function(t){return t[1].capture(e)}))},t.createDataTracks=function(e){var t=this.sampler,n=t.trackKeys.map((function(t){return q(e[t],"")})).join(".");if(!this.tracks[n]){var r=new E(t.bufferLength,t);t.trackKeys.forEach((function(t){r.tags[t]=e[t]})),r.key=n,this.tracks[n]=r,t.tracks.push(r),this.onTrackStart&&this.onTrackStart(r)}},e}();var D=new(n(5).a)(1,1e3,500,10,10),F=new _({interval:1e3,bufferLength:30,trackKeys:["exch"],fields:Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},P.cryptoTrade.time.fields),P.cryptoTrade.ohlc.fields),P.cryptoTrade.side.fields),P.cryptoTrade.stats.fields),P.cryptoTrade.volume.fields),P.cryptoTrade.mv.fields)});F.addExpression("sma10",(function(e){return e.close.mean(10)})),F.addExpression("ema10",(function(e){var t="ema".concat(10),n=e.close,r=e[t];if(!(r.availableLength<11)){var i=r.value(-1);i||(i=n.mean(10,-1));return n.value()*(2/11)+i*(1-2/11)}})),F.addExpression("cross",(function(e){return e.ema10.value(0)>e.sma10.value(0)&&e.ema10.value(-1)<e.sma10.value(-1)?1:e.ema10.value(0)<e.sma10.value(0)&&e.ema10.value(-1)>e.sma10.value(-1)?-1:void 0}));var C=function(){var e=i.a.useRef({index:0,time:0,clickIndex:0,periods:5,tickCount:0,initialized:!1,stopped:!1}).current,t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)([]),u=Object(l.a)(c,2),o=u[0],h=u[1],p=i.a.useCallback((function(e){var t=[],n=new Array(e.length);e.fifo((function(e,r){n[e.ordinal]=r[e.index],t=Object.keys(n[e.ordinal])})),s(t),h(n)}),[]);Object(r.useEffect)((function(){F.onTrackStart=function(e){e.onUpdate=function(){p(e)}},F.onInterval=function(){var e=Object.values(F.tracks)[0];p(e)},F.startSampling()}),[p]),Object(r.useEffect)((function(){!function t(){!function(e){var t={time:e,exch:"RNDWALK",price:Math.round(D.next()),qty:Math.round(100*Math.random()-50)};F.capture(t,(function(e,n){return n.tags.exch===t.exch}))}((new Date).getTime()),e.stopped||setTimeout(t,0)}()}),[e.stopped]);var d=Object(r.useCallback)((function(){}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex row justify-center align-center fill",onClick:d},i.a.createElement("div",{className:"flex column"},i.a.createElement("div",{style:{marginBottom:15}},i.a.createElement(f,{cols:a,items:o})))))};s.a.render(i.a.createElement(C,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.42693fae.chunk.js.map