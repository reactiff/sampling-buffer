(this["webpackJsonpsampling-buffer-example"]=this["webpackJsonpsampling-buffer-example"]||[]).push([[0],[,,,,,,function(t,e,n){t.exports=n(15)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(3),s=n.n(a),u=(n(11),n(12),n(13),n(1)),c=function(t){var e=t.cols||[];return i.a.createElement("thead",null,i.a.createElement("tr",null,e.map((function(t,e){return i.a.createElement("th",{key:e},t)}))))},l=function(t){var e=t.item,n=t.cols,r=Array.isArray(e);return i.a.createElement("tr",{className:"no-text-overflow"},r&&e.map((function(t,e){return i.a.createElement("td",{key:n[e]},"number"===typeof t&&t.toFixed(0))})),!r&&n.map((function(t,r){return i.a.createElement("td",{key:n[r]},"number"===typeof e[t]&&e[t].toFixed(0))})))},o=(n(14),function(t){var e=t.cols,n=t.items;return n?i.a.createElement("table",{cellPadding:0,cellSpacing:0,className:"data-table"},e&&e.length>0&&i.a.createElement(c,{cols:e}),i.a.createElement("tbody",null,n.map((function(t,n){return i.a.createElement(l,{key:n,item:t,cols:e})})))):null});function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var d=function(t,e,n,r){var i=e.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=new Array(i);return e.track.lifo((function(t,n){a[t.ordinal]=n[t.index][e.field]}),r,i),Math.min.apply(Math,a)}},p=function(t,e,n,r){var i=e.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=new Array(i);return e.track.lifo((function(t,n){a[t.ordinal]=n[t.index][e.field]}),r,i),Math.max.apply(Math,a)}},v=function(t,e,n,r){var i=e.track.getOffsetAdjAvailableLength(r);if(!(i<n)){var a=0,s=0;return e.track.lifo((function(t,n){a+=n[t.index][e.field],s++}),r,i),a/s}},y=function(t,e,n,r,i){var a=e.track.getOffsetAdjAvailableLength(r);a<n||e.track.lifo((function(t,n){i(t,n[t.index][e.field])}),r,a)},g=function(t,e,n,r){if(0!==e.track.getOffsetAdjAvailableLength(r)){var i=t.mean(n,r),a=0,s=0;return t.fn(n,r,(function(t,e){a+=Math.pow(e-i,2),s++})),Math.sqrt(a/s)}};function b(t,e,n){return function(r,i){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(t,e,r,i)}}var x=function(){function t(t){var e=this;Object.assign(this,t),this.min=b(this,t,d),this.max=b(this,t,p),this.mean=b(this,t,v),this.fn=function(t,e,n){return function(r,i,a){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(t,e,r,i,a)}}(this,t,y),this.stDev=b(this,t,g),this.value=function(t){if(void 0===t&&(t=0),0!==e.track.getOffsetAdjAvailableLength(t))return e.track.get(t)[e.field]}}return t.createSerie=function(e,n){return new t({field:e,track:n})},h(t,[{key:"availableLength",get:function(){return this.track.getOffsetAdjAvailableLength(0)}}]),t}(),k=function(){function t(t,e){this.tags={},this.array=[],this.cursor=0,this.counter=0,this.serieInstances={},this.series={};var n={length:t};this.sampler=e,this.array=Array.from(n).map(this.sampler.createSample),this.cursor=t?0:-1,this.shouldAdvance=this.sampler.newSamplePredicate,this.createSeries()}var e=t.prototype;return e.getOffsetAdjAvailableLength=function(t){return Math.max(0,Math.min(this.array.length,this.counter+1)-Math.abs(t))},e.get=function(t){return void 0===t&&(t=0),this.array[this.getIndex(t)]},e.getIndex=function(t){void 0===t&&(t=0);var e=this.cursor+t;if(t>0)return e%this.array.length;for(;e<0;)e=this.array.length+e;return e},e.createSeries=function(){var t=[].concat(this.sampler.fields.publicKeys,this.sampler.fields.expressionKeys);this.serieInstances={};var e={},n=this;t.forEach((function(t){e[t]=function(){return n.serieInstances[t]||(n.serieInstances[t]=x.createSerie(t,n)),n.serieInstances[t]}}));this.series=new Proxy(e,{get:function(t,e,n){return t[e]()}})},e.nextSample=function(t){var e=this.current[this.sampler.timeKey];if(this.lastAdvanceTime=e,0===this.current.__count){var n=this.get(-1);n.__count&&this.sampler.ffill(this.current,n)}this.counter++,this.cursor++,this.cursor===this.array.length&&(this.cursor=0),Object.assign(this.array[this.cursor],this.sampler.blank),this.array[this.cursor][this.sampler.timeKey]=e+this.sampler.interval},e.fillMissingSamples=function(t){var e=1;if(this.sampler.suppressAutoSampling&&(e=0),this.sampler.interval>0&&this.lastPeriodTime){var n=(t-this.lastPeriodTime)/this.sampler.interval-e;if(n>0)for(var r=0;r<n;r++){var i=this.sampler.interval,a=this.lastPeriodTime+i;this.nextSample("fillMissingSamples"),this.lastPeriodTime=a}}},e.preload=function(t){var e=this.sampler.getSampleTime(t.time);this.fillMissingSamples(e),this.sampler.collect(this,this.current,t,e),this.shouldAdvance(this.current,t,e,this.lastPeriodTime)&&(this.nextSample("preload"),this.lastPeriodTime=e)},e.capture=function(t,e){var n=e||t[this.sampler.timeKey],r=this.sampler.getSampleTime(n);this.lastPeriodTime||(this.lastPeriodTime=r),this.sampler.interval>0&&this.sampler.suppressAutoSampling&&this.fillMissingSamples(r),this.sampler.collect(this,this.current,t,r),0===this.sampler.interval&&(this.nextSample("capture"),this.lastPeriodTime=r),this.onUpdate&&this.onUpdate()},e.lifo=function(t,e,n){void 0===n&&(n=-1);for(var r=Math.abs(e||0),i=n>=0?Math.abs(n):0,a=this.array.length-r,s={index:this.cursor-r,relative:0,ordinal:0},u=this.array.length;u--&&!(r&&s.ordinal>=a)&&!(n>=0&&s.ordinal>=i);)s.index<0&&(s.index=this.array.length-1),t(s,this.array),s.ordinal++,s.index--,s.relative--},e.fifo=function(t,e){void 0===e&&(e=-1);for(var n=this.array.length,r=e>=0?e:n,i={index:0,relative:-(n-1),ordinal:0},a=n;a--&&r--;)i.index=(n+this.cursor-a)%n,t(i,this.array),i.ordinal++,i.relative++},h(t,[{key:"length",get:function(){return this.array.length}},{key:"current",get:function(){return this.array[this.cursor]}}]),t}();function E(t,e,n){t.keys.push(e),"_"===e[0]&&"_"!==e[1]?(t.hidden[e]=!0,t.hiddenKeys.push(e)):t.publicKeys.push(e),"function"===typeof n?t.fn[e]=n:"object"===typeof n?(n.cumulative&&(t.cumulative[e]=!0),t.fn[e]=n.fn,t.fill[e]=n.fill):t.fn[e]=function(){return n}}function S(t,e){var n={keys:[],publicKeys:[],hiddenKeys:[],expressionKeys:[],hidden:{},cumulative:{},fn:{},fill:{}};return Array.isArray(t.fields)?function(t,e){e.fields.forEach((function(e){switch(typeof e){case"string":E(t,e,(function(t){return t[e]}));break;default:E(t,e.name,e)}}))}(n,t):function(t,e){Object.entries(e.fields).forEach((function(e){var n=e[0],r=e[1];E(t,n,r)}))}(n,t),e.forEach((function(t){n.expressionKeys.push(t.name)})),n}function A(t){var e={__count:0};return t.publicKeys.forEach((function(t){e[t]=void 0})),t.expressionKeys.forEach((function(t){e[t]=void 0})),function(){return m({},e)}}var T=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"===typeof t?t.apply(void 0,n):t};function j(t){var e=S(t,[]),n={addExpression:function(e,r){if(n.expressionDict[e])throw new Error("A field with the name '"+e+"' already exists.");n.expressionDict[e]=r,n.expressions.push({name:e,expression:r}),n.fields=S(t,n.expressions),n.createSample=A(n.fields),n.cumulatives=n.fields.keys.filter((function(t){return n.fields.cumulative[t]})),n.blank=function(t,e){var n=m({},t);return e.forEach((function(t){return delete n[t]})),n}(n.createSample(),n.cumulatives),n.tracks.forEach((function(t){return t.createSeries()}))},blank:{},bufferLength:t.bufferLength,collect:function(t,e,i,a){(function(t,e,i){t.__count++,n.fields.hiddenKeys.forEach((function(r){n.fields.fn[r](e,t[r],t)})),n.fields.publicKeys.forEach((function(a){if(a===n.timeKey){var s=r(i||e[a]);e[a]=s}var u=n.fields.fn[a](e,t[a],t);"undefined"!==typeof u&&(t[a]=u)}))})(e,i,a),function(t,e){n.expressions.forEach((function(n){var r=n.expression(e.series);"undefined"!==typeof r&&(t[n.name]=r)}))}(e,t)},createSample:A(e),cumulatives:[],expressionDict:{},expressions:[],ffill:function(t,e){n.fields.publicKeys.filter((function(t){return!!n.fields.fill[t]})).forEach((function(r){t[n.timeKey]=e[n.timeKey]+n.interval,t[r]=n.fields.fill[r](e)})),t.__count=1},fields:e,getSampleTime:r,interval:t.interval||0,newSamplePredicate:function(t,e,i,a){var s=r(i);return"undefined"===typeof a||(0===n.interval||s-a>=n.interval)},series:{},suppressAutoSampling:t.suppressAutoSampling,timeKey:T(t.timeKey)||"time",trackKeys:t.trackKeys||[],tracks:[]};function r(t){return n.interval?t-t%n.interval:t}return n}var M=function(){return!0},O=function(){function t(t){this.tracks={},this.sampling=!1,this.sampler=j(t)}var e=t.prototype;return e.addExpression=function(t,e){this.sampler.addExpression(t,e)},e.getTracks=function(t){return Object.entries(this.tracks).filter((function(e){return(t||function(){return!0})(e[0],e[1])})).map((function(t){return t[1]}))},e.startSampling=function(){if(!this.sampler.suppressAutoSampling&&!this.sampling){var t=this;this.timer=setInterval((function(){t.sampler.tracks.forEach((function(t){t.nextSample("timer")})),t.onInterval&&t.onInterval()}),this.sampler.interval),this.sampling=!0}},e.stopSampling=function(){clearInterval(this.timer),this.sampling=!1},e.preload=function(t,e){this.createDataTracks(t),Object.entries(this.tracks).filter((function(t){return(e||M)(t[0],t[1])})).forEach((function(e){return e[1].preload(t)}))},e.capture=function(t,e){this.createDataTracks(t),Object.entries(this.tracks).filter((function(t){return(e||M)(t[0],t[1])})).forEach((function(e){return e[1].capture(t)}))},e.createDataTracks=function(t){var e=this.sampler,n=e.trackKeys.map((function(e){return n=t[e],r="","undefined"!==typeof n?n:r;var n,r})).join(".");if(!this.tracks[n]){var r=new k(e.bufferLength,e);e.trackKeys.forEach((function(e){r.tags[e]=t[e]})),r.key=n,this.tracks[n]=r,e.tracks.push(r),this.onTrackStart&&this.onTrackStart(r)}},t}();function w(t,e){return"undefined"!==typeof t?t:e}function K(t,e){if(t)return"function"===typeof e?e():e}var P=Math.min,D=Math.max,L=Math.abs,I={time:function(t,e){return w(e,t.time)},_buy:function(t){return K(t.qty>0,(function(){return t.buy=1}))},_sell:function(t){return K(t.qty<0,(function(){return t.sell=1}))},ttlTradeCount:{fn:function(t,e){return w(e,0)+1},fill:function(){return 0}},buyTradeCount:{fn:function(t,e){return K(t.buy,w(e,0)+1)},fill:function(){return 0}},sellTradeCount:{fn:function(t,e){return K(t.sell,w(e,0)+1)},fill:function(){return 0}},buyVol:{fn:function(t,e){return K(t.buy,w(e,0)+t.qty)},fill:function(){return 0}},sellVol:{fn:function(t,e){return K(t.sell,w(e,0)+t.qty)},fill:function(){return 0}},ttlVol:{fn:function(t,e){return w(e,0)+L(t.qty)},fill:function(){return 0}},netVol:{fn:function(t,e){return w(e,0)+t.qty},fill:function(){return 0}},cumNetVol:{fn:function(t,e){return w(e,0)+t.qty},cumulative:!0},buyMv:{fn:function(t,e){return K(t.buy,w(e,0)+t.price*t.qty)},fill:function(){return 0}},sellMv:{fn:function(t,e){return K(t.sell,w(e,0)+t.price*t.qty)},fill:function(){return 0}},ttlMv:{fn:function(t,e){return w(e,0)+t.price*L(t.qty)},fill:function(){return 0}},netMv:{fn:function(t,e){return w(e,0)+t.price*t.qty},fill:function(){return 0}},volWtdPrice:{fn:function(t,e,n){return n.ttlMv/n.ttlVol},fill:function(){return 0}},open:{fn:function(t,e){return w(e,t.price)},fill:function(t){return t.close}},high:{fn:function(t,e){return D(t.price,w(e,t.price))},fill:function(t){return t.close}},low:{fn:function(t,e){return P(t.price,w(e,t.price))},fill:function(t){return t.close}},close:{fn:function(t){return t.price},fill:function(t){return t.close}}},_=n(4),q=n(5),C=new(function(){function t(e,n,r,i,a){Object(_.a)(this,t),this.min=void 0,this.max=void 0,this.maxTrend=void 0,this.maxStep=void 0,this.value=void 0,this.trendRem=void 0,this.trendDir=void 0,this.min=e,this.max=n,this.maxTrend=i,this.maxStep=a,this.value=r||Math.random()*((n-e)/2)+e,this.trendRem=0,this.trendDir=0}return Object(q.a)(t,[{key:"createTrend",value:function(){this.trendDir=Math.round(2*Math.random()-1),this.trendRem=Math.random()*this.maxTrend}},{key:"next",value:function(){this.trendRem<=0&&this.createTrend();var t=Math.random()*this.maxStep;return this.trendRem-=t,this.value+=t*this.trendDir,this.value>=this.max&&(this.createTrend(),this.trendDir=-1,this.value-=t),this.value<=this.min&&(this.createTrend(),this.trendDir=1,this.value+=t),this.value}}]),t}())(1,1e3,500,10,10),R=new O({interval:1e3,bufferLength:30,trackKeys:["exch"],fields:I});R.addExpression("sma10",(function(t){return t.close.mean(10)})),R.addExpression("ema10",(function(t){var e="ema".concat(10),n=t.close,r=t[e];if(!(r.availableLength<11)){var i=r.value(-1);i||(i=n.mean(10,-1));return n.value()*(2/11)+i*(1-2/11)}})),R.addExpression("cross",(function(t){return t.ema10.value(0)>t.sma10.value(0)&&t.ema10.value(-1)<t.sma10.value(-1)?1:t.ema10.value(0)<t.sma10.value(0)&&t.ema10.value(-1)>t.sma10.value(-1)?-1:void 0}));var N=function(){var t=i.a.useRef({index:0,time:0,clickIndex:0,periods:5,tickCount:0,initialized:!1,stopped:!1}).current,e=Object(r.useState)([]),n=Object(u.a)(e,2),a=n[0],s=n[1],c=Object(r.useState)([]),l=Object(u.a)(c,2),f=l[0],h=l[1],m=i.a.useCallback((function(t){var e=[],n=new Array(t.length);t.fifo((function(t,r){n[t.ordinal]=r[t.index],e=Object.keys(n[t.ordinal])})),s(e),h(n)}),[]);Object(r.useEffect)((function(){R.onTrackStart=function(t){t.onUpdate=function(){m(t)}},R.onInterval=function(){var t=Object.values(R.tracks)[0];m(t)},R.startSampling()}),[m]),Object(r.useEffect)((function(){!function e(){!function(t){var e={time:t,exch:"RNDWALK",price:Math.round(C.next()),qty:Math.round(100*Math.random()-50)};R.capture(e,(function(t,n){return n.tags.exch===e.exch}))}((new Date).getTime()),t.stopped||setTimeout(e,0)}()}),[t.stopped]);var d=Object(r.useCallback)((function(){}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex row justify-center align-center fill",onClick:d},i.a.createElement("div",{className:"flex column"},i.a.createElement("div",{style:{marginBottom:15}},i.a.createElement(o,{cols:a,items:f})))))};s.a.render(i.a.createElement(N,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.8fcb87d7.chunk.js.map